<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>

<body>
<a href="http://www.baidu.com" id="btn">btn</a>
<div id="myDiv">
	Right click or Ctrl+click me to get a custom context menu.Click anywhere else to get the default context menu.
</div>
<ul id="myMenu" style="position:absolute;visibility:hidden;background-color:silver;">
	<li>
		<a href="http://www.nczonline.net">Nicholasâ€™ site</a>
	</li>
	<li>
		<a href="http://www.wrox.com">Wrox site</a>
	</li>
	<li>
		<a href="http://www.yahoo.com">Yahoo!</a> 
	</li>
</ul>

<script>
var btn = document.getElementById("btn"),
	EventUtil = {
		addHandler: function(element,type,handler) {
			if(element.addEventListener) {
				element.addEventListener(type,handler,false);
			} else if(element.attachEvent) {
				element.attachEvent("on" + type,handler);
			} else {
				element["on" + type] = handler;
			}
		},
		removeHandler: function(element,type,handler) {
			if(element.removeEventListener) {
				element.removeEventListener(type,handler);
			} else if(element.detachEvent) {
				element.detachEvent("on" + type,handler);
			} else {
				element["on" + type] = null;
			}
		},
		getEvent: function(event) {
		    return event ? event : window.event;
		},
		getTarget: function(event) {
		    return event.target || event.srcElement;
		},
		preventDefault: function(event){
		    if(event.preventDefault) {
		        event.preventDefault();
		    }else {
		        event.returnValue = false;
		    }
		},
		stopPropagation: function(event) {
		    if(event.stopPropagation) {
		        event.stopPropagation();
		    }else {
		        event.cancelBubble = true;
		    }
		}
	}

var div = document.getElementById("myDiv");
EventUtil.addHandler(div, "contextmenu", function(event){
    event = EventUtil.getEvent(event);
    EventUtil.preventDefault(event);
    var menu = document.getElementById("myMenu");
    menu.style.left = event.clientX + "px";
    menu.style.top = event.clientY + "px";
    menu.style.visibility = "visible";
});
EventUtil.addHandler(document, "click", function(event){
    document.getElementById("myMenu").style.visibility = "hidden";
});
</script>
</body>
</html>